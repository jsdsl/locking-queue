"use strict";var __awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,u){function l(e){try{s(o.next(e))}catch(e){u(e)}}function r(e){try{s(o.throw(e))}catch(e){u(e)}}function s(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(l,r)}s((o=o.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const lock_1=require("./lock"),locking_queue_node_1=require("./locking-queue-node"),doubly_linked_list_1=require("@jsdsl/doubly-linked-list");class LockingQueue{constructor(){this.dll=new doubly_linked_list_1.DoublyLinkedList}getLock(){return __awaiter(this,void 0,void 0,function*(){let e=new lock_1.Lock,t=this.dll.insertLast(new locking_queue_node_1.LockingQueueNode);return e.subscribeToRelinquishNotifier(()=>{this.dll.hasNextNode(t)&&t.getNextNode().getElement().readyUp(),this.dll.removeNode(t)}),this.dll.hasPreviousNode(t)&&(yield t.getElement().getReadyPromise()),e})}}exports.LockingQueue=LockingQueue;
//# sourceMappingURL=locking-queue.js.map
