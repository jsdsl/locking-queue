{"version":3,"sources":["../ts/locking-queue.ts"],"names":["lock_1","require","locking_queue_node_1","doubly_linked_list_1","LockingQueue","[object Object]","this","dll","DoublyLinkedList","lock","Lock","node","insertLast","LockingQueueNode","subscribeToRelinquishNotifier","hasNextNode","getNextNode","getElement","readyUp","removeNode","hasPreviousNode","getReadyPromise","exports"],"mappings":"2WAMA,MAAAA,OAAAC,QAAA,UACAC,qBAAAD,QAAA,wBACAE,qBAAAF,QAAA,6BASA,MAAaG,aAIZC,cAECC,KAAKC,IAAM,IAAIJ,qBAAAK,iBAIHH,0DAEZ,IAAII,EAAa,IAAIT,OAAAU,KAEjBC,EAA+CL,KAAKC,IAAIK,WAAW,IAAIV,qBAAAW,kBAW3E,OATAJ,EAAKK,8BAA8B,KAE9BR,KAAKC,IAAIQ,YAAYJ,IAAOA,EAAKK,cAAcC,aAAaC,UAChEZ,KAAKC,IAAIY,WAAWR,KAIjBL,KAAKC,IAAIa,gBAAgBT,WAAaA,EAAKM,aAAaI,mBAErDZ,KAzBTa,QAAAlB,aAAAA","file":"locking-queue.js","sourcesContent":["/*\n *\tCreated by Trevor Sears <trevorsears.main@gmail.com>.\n *\t1:32 AM -- March 14th, 2019.\n *\tProject: @jsdsl/locking-queue\n */\n\nimport { Lock } from \"./lock\";\nimport { LockingQueueNode } from \"./locking-queue-node\";\nimport { DoublyLinkedList, DoublyLinkedListNode } from \"@jsdsl/doubly-linked-list\";\n\n/**\n *\n *\n * @author Trevor Sears <trevorsears.main@gmail.com>\n * @version v0.1.0\n * @since v0.1.0\n */\nexport class LockingQueue {\n\t\n\tprivate dll: DoublyLinkedList<LockingQueueNode>;\n\t\n\tpublic constructor() {\n\t\n\t\tthis.dll = new DoublyLinkedList<LockingQueueNode>();\n\t\n\t}\n\t\n\tpublic async getLock(): Promise<Lock> {\n\t\t\n\t\tlet lock: Lock = new Lock();\n\t\t\n\t\tlet node: DoublyLinkedListNode<LockingQueueNode> = this.dll.insertLast(new LockingQueueNode());\n\t\t\n\t\tlock.subscribeToRelinquishNotifier(() => {\n\t\t\t\n\t\t\tif (this.dll.hasNextNode(node)) node.getNextNode().getElement().readyUp();\n\t\t\tthis.dll.removeNode(node);\n\t\t\t\n\t\t});\n\t\t\n\t\tif (this.dll.hasPreviousNode(node)) await node.getElement().getReadyPromise();\n\t\t\n\t\treturn lock;\n\t\t\n\t}\n\t\n}"]}